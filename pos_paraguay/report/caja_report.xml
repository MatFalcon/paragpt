<odoo>
    <template id="caja_report">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.basic_layout">
                    <div class="header">
                        <div class="row">
                            <div class="col-4">
                                <!--<img ct-if="o.user_id.company_id.logo" width="1024px" height="1024px" t-att-src="'data:image/png;base64,%s' %res_company.logo" class="pull-left img-responsive"/>-->
                                <!--<img  ct-if="o.user_id.company_id.logo" width="150" height="126" t-att-src="'data:image/png;base64,%s' %o.user_id.company_id.logo" />-->
                                <h5><span t-field="o.user_id.company_id.name"/> </h5>
                            </div>

                            <div class="col-4 pull-right ">
                                <p>Fecha: <span t-esc="context_timestamp(datetime.datetime.now()).strftime('%d/%m/%Y %H:%M')"/></p>
                                <!--<p>Fecha: <span t-esc="o.funcion_fecha_hoy"/></p>-->
                                <span>Pag: </span><span class="page" /> de <span class="topage" />
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12 pull-left">
                                <b>&#160;&#160;&#160;#Reporte de Caja: </b> <span t-field="o.name"/>
                            </div>
                        </div>
                    </div>
                    <link rel="stylesheet" href="/pos_paraguay/static/src/css/caja.css"/>
                    <div class="page" >
                        <div class="contenedor">
                            <div class="row negrita">
                                <div class="col-4 pull-left">
                                    <p> Usuario: <span t-field="o.user_id.name"/></p>
                                </div>
                                <div class="col-4 pull-left">
                                    <p> Fecha Apertura: <span t-field="o.start_at"/></p>
                                </div>
                                <div class="col-4 pull-left">
                                    <p> Fecha de Cierre: <span t-field="o.stop_at"/></p>
                                </div>

                            </div>
                            <div class="row negrita">
                                <h4>Detalle</h4>
                            </div>
                            <t t-set="total_item" t-value="0"/>
                            <t t-foreach="o.statement_ids" t-as="s">
                                <t t-if="len(s.line_ids)>0">



                                <br/>
                                <div class="row negrita">
                                    <div class="col-3 pull-left">
                                        <p>Diario: <span t-field="s.journal_id"/></p>
                                    </div>

                                    <!--<div class="col-3 pull-left">-->
                                        <!--<p>Fecha: <span t-field="s.date"/></p>-->
                                    <!--</div>-->
                                    <!--<div class="col-3 pull-left">-->
                                        <!--<p>Saldo Inicial: <span t-field="s.balance_start"/></p>-->
                                    <!--</div>-->
                                    <!--<div class="col-3 pull-left">-->
                                        <!--<p>Saldo Final: <span t-field="s.balance_end_real"/></p>-->
                                    <!--</div>-->

                                </div>
                                <table class="tabla">
                                    <thead>
                                        <tr>
                                            <th>Fecha</th>
                                            <th>Descripcion</th>
                                            <th>Factura</th>
                                            <th>Estado</th>
                                            <th>Empresa</th>
                                            <!--<th>Referencia</th>-->
                                            <th>Monto</th>

                                        </tr>
                                    </thead>
                                    <tbody>
                                        <t t-set="total" t-value="0"/>
                                        <t t-set="total_gs" t-value="0"/>
                                        <t t-set="total_item" t-value="total_item+len(s.line_ids)"/>
                                        <tr t-foreach="s.line_ids" t-as="p">
                                            <td><span t-esc="p.date" /></td>
                                            <td><span t-esc="p.name" /></td>
                                            <t t-if="p.pos_statement_id.invoice_id.nro_factura">
                                                <td><span t-esc="p.pos_statement_id.invoice_id.nro_factura" /></td>
                                                <td><span t-esc="p.pos_statement_id.invoice_id.state" /></td>
                                            </t>
                                            <t t-else="">
                                                <td><span>No aplica</span></td>
                                                <td><span>No aplica</span></td>
                                            </t>
                                            <td><span class="mayuscula" t-esc="p.partner_id.name"/> </td>
                                            <!--<td><span t-esc="p.ref"/> </td>-->
                                            <t t-if="p.amount_pago > 0">
                                                <td><span t-esc="o.agregar_punto_de_miles(p.amount_pago)" /> </td>
                                                <t t-set="total" t-value="total+p.amount_pago"/>

                                            </t>
                                            <t t-else="">
                                                <td><span t-esc="o.agregar_punto_de_miles(p.amount)" /> </td>
                                                <t t-set="total" t-value="total+p.amount"/>

                                            </t>
                                        </tr>
                                        <tr>
                                            <td colspan="5">Total</td>
                                            <td><span t-esc="o.agregar_punto_de_miles(total)"/> </td>
                                        </tr>
                                    </tbody>

                                </table>
                                 <div class="col-3 pull-left">
                                    <p>Cantidad de Item: <span t-esc="len(s.line_ids)"/></p>
                                </div>
                                </t>
                            </t>

                            <div class="col-3 pull-left negrita">
                                <p>Total de Items: <span t-esc="total_item"/></p>
                            </div>
                            <br/>
                            <br/>
                            <br/>
                            <t t-set='dic' t-value="o.totales_diarios(o.statement_ids)"/>
                            <table>
                                <thead>
                                    <tr>
                                        <th>Diario</th>
                                        <th>Monto</th>
                                    </tr>
                                </thead>
                                <tbody class="diario-total">
                                    <t t-set="total_diario" t-value="0"/>
                                    <tr t-foreach="dic" t-as="d">
                                        <td><span t-esc="d[0].name"/> </td>
                                        <td><span t-esc="o.agregar_punto_de_miles(d[1])"/> </td>
                                        <t t-set="total_diario" t-value="total_diario+d[1]"/>
                                    </tr>
                                    <tr class="negrita">
                                        <td>Total Gs.</td>
                                        <td><span t-esc="o.agregar_punto_de_miles(o.total_gs)"/></td>
                                    </tr>
                                    <tr class="negrita">
                                        <td>Total USD.</td>
                                        <td><span t-esc="o.agregar_punto_de_miles(o.total_usd)"/></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>
</odoo>